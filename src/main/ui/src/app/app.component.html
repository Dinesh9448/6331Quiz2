<div class="page-header">
	<hr>
	<h1>1001819448 </h1>
  <h1>Dinesh Madurantakam </h1>
</div>
<div class="card-body"
       *ngIf="data">
    <div class="container">
      <div class="row justify-content-between">
        <div class="col-3">
          <select class="form-control"
                  (change)="onSelected($event.target.value)">
            <option value="0">- Display All -</option>
			<option value="1">- PresidentElectByYearAndStatePO -</option>
          </select>
        </div>
      </div>
	</div>
</div>
<div class="card-body"
       *ngIf="filterId != 0">
	   <div class="container">
		<div class="row justify-content-between">
			<div class="md-form" *ngIf="filterId == 1">
				<div class="row">
					<div class="col-sm">
				<input #textbox mdbInput type="text" id="form1" class="form-control">
				<label for="form1" class="">PresidentElectByYearAndStatePO</label>
					</div>
					<div class="col-sm">
					<button type="button" class="btn btn-primary" (click)="magGreater(textbox.value)">Search</button>
					</div>
			</div>
			</div>
			<div class="md-form" *ngIf="filterId == 2">
				<div class="row">
					<div class="col-sm">
				<input #minMag mdbInput type="text" id="form1" class="form-control">
				<label for="form1" class="">Year </label>
			</div>
			<div class="col-sm">
				<input #maxMag mdbInput type="text" id="form1" class="form-control">
				<label for="form1" class="">State </label>
			</div>
			<div class="col-sm">
				<button type="button" class="btn btn-primary" (click)="magAndTime(minMag.value, maxMag.value, minTime.value, maxTime.value)">Search</button>
			</div>

			</div>
		  </div>

	  </div>
		</div>
</div>

<div class="example-container mat-elevation-z8">
	<div class="example-loading-shade"
		 *ngIf="isLoadingResults || isRateLimitReached">
	  <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
	  <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">
		EarthQuake API rate limit has been reached. It will be reset in one minute.
	  </div>
	</div>


	<div class="example-table-container">

	  <table mat-table [dataSource]="data" class="example-table"
			 matSort matSortActive="time" matSortDisableClear matSortDirection="desc">
		<!-- Number Column -->
		<ng-container matColumnDef="latitude">
		  <th mat-header-cell *matHeaderCellDef>year</th>
		  <td mat-cell *matCellDef="let row">{{row.year}}</td>
		</ng-container>

		<!-- Title Column -->
		<ng-container matColumnDef="longitude">
		  <th mat-header-cell *matHeaderCellDef>state</th>
		  <td mat-cell *matCellDef="let row">{{row.state}}</td>
		</ng-container>

		<!-- State Column -->
		<ng-container matColumnDef="depth">
		  <th mat-header-cell *matHeaderCellDef>candidate</th>
		  <td mat-cell *matCellDef="let row">{{row.candidate}}</td>
		</ng-container>

		<ng-container matColumnDef="mag">
			<th mat-header-cell *matHeaderCellDef>partyDetailed</th>
			<td mat-cell *matCellDef="let row">{{row.partyDetailed}}</td>
		  </ng-container>

		  <ng-container matColumnDef="magType">
			<th mat-header-cell *matHeaderCellDef>candidateVotes</th>
			<td mat-cell *matCellDef="let row">{{row.candidateVotes}}</td>
		  </ng-container>

      <ng-container matColumnDef="magType">
        <th mat-header-cell *matHeaderCellDef>totalVotes</th>
        <td mat-cell *matCellDef="let row">{{row.totalVotes}}</td>
      </ng-container>

      <ng-container matColumnDef="magType">
        <th mat-header-cell *matHeaderCellDef>partySimplified</th>
        <td mat-cell *matCellDef="let row">{{row.partySimplified}}</td>
      </ng-container>
		<!-- Created Column -->
		<ng-container matColumnDef="time">
		  <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
			Time
		  </th>
		  <td mat-cell *matCellDef="let row">{{row.time | date}}</td>
		</ng-container>

		<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
		<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
	  </table>
	</div>

	<mat-paginator [length]="resultsLength" [pageSize]="20"></mat-paginator>


  </div>
  <br>
  <br>
  <form [formGroup]="myForm" (ngSubmit)="submit()">

    <div class="form-group">
        <label for="file">EarthQuake CSV File Upload</label>
        <input
            formControlName="file"
            id="file"
            type="file"
            class="form-control"
            (change)="onFileChange($event)">
        <div *ngIf="f.file.touched && f.file.invalid" class="alert alert-danger">
            <div *ngIf="f.file.errors.required">File is required.</div>
        </div>
    </div>
    <button class="btn btn-primary" type="submit">Submit</button>

</form>

<br>
<br>
<div class="card" *ngFor="let content of queryStatistics; let i = index">
  <div class="card-header">
    Query{{i+1}}
  </div>
  <div class="card-body">
    <blockquote class="blockquote mb-0">
      <p>{{content.query}}</p>
      <footer class="blockquote-footer">Query Execution Time: <cite title="Source Title">{{content.executionTime}} MilliSeconds</cite></footer>
    </blockquote>
  </div>
</div>

